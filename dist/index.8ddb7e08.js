import{b as e,e as a,G as r,H as s}from"./index.8a505df9.js";import{u as t}from"./useHeaderSetting.99d0c5fa.js";import n from"./404.660006ce.js";import{d as m,a as o,c,u as f,M as i,n as u,f as l,j as p,k as d,C as g,t as h,L as w,Z as F,X as S,a1 as y,B as v}from"./element-plus.3788f1c9.js";import{u as R}from"./uniqBy.f7365b6a.js";var x=m({name:"FrameView",props:{frameSrc:{type:String,default:""}},components:{pageNofind:n},setup(){const r=o(window.innerHeight),s=o(null),n=o(!0),{prefixCls:m}=e("iframe-page"),{getShowHeader:l}=t(),{getTagsShow:p}=a(),d=c((()=>f(l)?56:0)),g=c((()=>f(p)?37:0)),h=c((()=>({height:f(r)-d.value-g.value-8+"px"})));return i((()=>{u((()=>{const e=f(s);if(!e)return;const a=e;e.onload=()=>{const{contentWindow:e}=a;e.document.body&&!e.document.body.innerHTML&&(n.value=!1)}}))})),{prefixCls:m,getWrapStyle:h,frameRef:s,visibility:n}}});const C=g()(((e,a,r,s,t,n)=>{const m=l("page-nofind");return p(),d("div",{class:e.prefixCls,style:e.getWrapStyle},[e.visibility?(p(),d("iframe",{key:0,src:e.frameSrc,class:`${e.prefixCls}--main`,ref:"frameRef"},null,10,["src"])):(p(),d(m,{key:1}))],6)}));x.render=C,x.__scopeId="data-v-04d315b7";var b=m({name:"FramePanel",components:{FrameView:x},setup(){const{prefixCls:t}=e("frame-wrapper"),{getFramePages:n,hasRenderFrame:m,showIframe:o}=function(){const{currentRoute:e}=r,{getTagsShow:t}=a(),n=c((()=>o(h(r.getRoutes()))||[])),m=c((()=>s.getTagsState.reduce(((e,a)=>(a.meta&&Reflect.has(a.meta,"frameSrc")&&e.push(a.name),e)),[])));function o(e){let a=[];for(const r of e){const{meta:{frameSrc:e}={},children:s}=r;e&&a.push(r),s&&s.length&&a.push(...o(s))}return a=R(a,"name"),a}return{hasRenderFrame:function(e){return f(t)?f(m).includes(e):r.currentRoute.value.name===e},getFramePages:n,showIframe:function(a){return a.name===f(e).name},getAllFramePages:o}}(),i=c((()=>f(n).length>0));return{prefixCls:t,getFramePages:n,hasRenderFrame:m,showIframe:o,showFrame:i,resetFrameURL:function(e){return e.includes("?")?`${e}&t=${+new Date}`:`${e}?t=${+new Date}`}}}});const j=g()(((e,a,r,s,t,n)=>{const m=l("FrameView");return e.showFrame?(p(),d("div",{key:0,class:e.prefixCls},[(p(!0),d(w,null,F(e.getFramePages,(a=>(p(),d(w,{key:a.path},[a.meta.frameSrc&&e.hasRenderFrame(a.name)?S((p(),d(m,{key:0,frameSrc:e.resetFrameURL(a.meta.frameSrc)},null,8,["frameSrc"])),[[y,e.showIframe(a)]]):v("",!0)],64)))),128))],2)):v("",!0)}));b.render=j,b.__scopeId="data-v-5c7950c8";export{b as _};
