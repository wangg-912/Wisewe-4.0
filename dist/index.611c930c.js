import{j as a}from"./index.2cb29b3d.js";import{r as t,c as l}from"./animation.99b86f09.js";import{d as e,r,M as n,c as i,w as u,P as s,u as o,j as p,k as d,A as c}from"./element-plus.34e177e2.js";var V=e({name:"CountTo",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:a=>a>=0},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:(a,t,l,e)=>l*(1-Math.pow(2,-10*a/e))*1024/1023+t}},emits:["mounted","callback"],setup(e,{emit:p}){const d=r({localStartVal:e.startVal,displayValue:y(e.startVal),printVal:null,paused:!1,localDuration:e.duration,startTime:null,timestamp:null,remaining:null,rAF:null});n((()=>{e.autoplay&&V(),p("mounted")}));const c=i((()=>e.startVal>e.endVal));function V(){const{startVal:a,duration:l}=e;d.localStartVal=a,d.startTime=null,d.localDuration=l,d.paused=!1,d.rAF=t(f)}function m(){d.startTime=null,d.localDuration=+d.remaining,d.localStartVal=+d.printVal,t(f)}function f(a){const{useEasing:l,easingFn:r,endVal:n}=e;d.startTime||(d.startTime=a),d.timestamp=a;const i=a-d.startTime;d.remaining=d.localDuration-i,l?o(c)?d.printVal=d.localStartVal-r(i,0,d.localStartVal-n,d.localDuration):d.printVal=r(i,d.localStartVal,n-d.localStartVal,d.localDuration):o(c)?d.printVal=d.localStartVal-(d.localStartVal-n)*(i/d.localDuration):d.printVal=d.localStartVal+(n-d.localStartVal)*(i/d.localDuration),o(c)?d.printVal=d.printVal<n?n:d.printVal:d.printVal=d.printVal>n?n:d.printVal,d.displayValue=y(d.printVal),i<d.localDuration?d.rAF=t(f):p("callback")}function y(t){const{decimals:l,decimal:r,separator:n,suffix:i,prefix:u}=e;t=Number(t).toFixed(l);const s=(t+="").split(".");let o=s[0];const p=s.length>1?r+s[1]:"",d=/(\d+)(\d{3})/;if(n&&!a(n))for(;d.test(o);)o=o.replace(d,"$1"+n+"$2");return u+o+p+i}return u([()=>e.startVal,()=>e.endVal],(()=>{e.autoplay&&V()})),{count:f,reset:function(){d.startTime=null,l(d.rAF),d.displayValue=y(e.startVal)},resume:m,start:V,pauseResume:function(){d.paused?(m(),d.paused=!1):(l(d.rAF),d.paused=!0)},displayValue:s(d,"displayValue")}}});V.render=function(a,t,l,e,r,n){return p(),d("span",null,c(a.displayValue),1)};export{V as _};
