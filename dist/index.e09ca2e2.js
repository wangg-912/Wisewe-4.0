import{b as e,e as a,G as r,H as s}from"./index.cb67af22.js";import{u as t}from"./useHeaderSetting.97e29822.js";import n from"./404.d66bc6b2.js";import{d as m,a as o,c as i,u,M as c,n as f,f as l,j as p,k as d,C as g,t as h,L as w,Z as F,X as S,a1 as y,B as R}from"./element-plus.34e177e2.js";import{u as b}from"./uniqBy.f7365b6a.js";var v=m({name:"FrameView",props:{frameSrc:{type:String,default:""}},components:{pageNofind:n},setup(){const r=o(window.innerHeight),s=o(null),n=o(!0),{prefixCls:m}=e("iframe-page"),{getShowHeader:l}=t(),{getTagsShow:p}=a(),d=i((()=>u(l)?56:0)),g=i((()=>u(p)?37:0)),h=i((()=>({height:u(r)-d.value-g.value-8+"px"})));return c((()=>{f((()=>{const e=u(s);if(!e)return;const a=e;e.onload=()=>{const{contentWindow:e}=a;!e.document.body||e.document.body.innerHTML&&!e.document.body.innerHTML.includes("HTTP Status 404")||(n.value=!1)}}))})),{prefixCls:m,getWrapStyle:h,frameRef:s,visibility:n}}});const x=g()(((e,a,r,s,t,n)=>{const m=l("page-nofind");return p(),d("div",{class:e.prefixCls,style:e.getWrapStyle},[e.visibility?(p(),d("iframe",{key:0,src:e.frameSrc,class:`${e.prefixCls}--main`,ref:"frameRef"},null,10,["src"])):(p(),d(m,{key:1}))],6)}));v.render=x,v.__scopeId="data-v-bde81a9a";var C=m({name:"FramePanel",components:{FrameView:v},setup(){const{prefixCls:t}=e("frame-wrapper"),{getFramePages:n,hasRenderFrame:m,showIframe:o}=function(){const{currentRoute:e}=r,{getTagsShow:t}=a(),n=i((()=>o(h(r.getRoutes()))||[])),m=i((()=>s.getTagsState.reduce(((e,a)=>(a.meta&&Reflect.has(a.meta,"frameSrc")&&e.push(a.name),e)),[])));function o(e){let a=[];for(const r of e){const{meta:{frameSrc:e}={},children:s}=r;e&&a.push(r),s&&s.length&&a.push(...o(s))}return a=b(a,"name"),a}return{hasRenderFrame:function(e){return u(t)?u(m).includes(e):r.currentRoute.value.name===e},getFramePages:n,showIframe:function(a){return a.name===u(e).name},getAllFramePages:o}}(),c=i((()=>u(n).length>0));return{prefixCls:t,getFramePages:n,hasRenderFrame:m,showIframe:o,showFrame:c,resetFrameURL:function(e){return e.includes("?")?`${e}&t=${+new Date}`:`${e}?t=${+new Date}`}}}});C.render=function(e,a,r,s,t,n){const m=l("FrameView");return e.showFrame?(p(),d("div",{key:0,class:e.prefixCls},[(p(!0),d(w,null,F(e.getFramePages,(a=>(p(),d(w,{key:a.path},[a.meta.frameSrc&&e.hasRenderFrame(a.name)?S((p(),d(m,{key:0,frameSrc:e.resetFrameURL(a.meta.frameSrc)},null,8,["frameSrc"])),[[y,e.showIframe(a)]]):R("",!0)],64)))),128))],2)):R("",!0)};export{C as _};
